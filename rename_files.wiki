[[index|Main]]
[[bash|Back]]


[[vifm|Переименование с помощью vifm]]

Можно использовать утилиту rename дистрибутива ArchLinux'a (см. man rename).
Но в нём не работают регулярные выражения.

Чтобы исп. регулярные выражения нужно установить утилиту perl-rename:
sudo pacman -S perl-rename

Для удобного запуска perl-rename в терминале можно установить alias в .bashrc:
alias prename='perl-rename'

В терминале запускаем с помощью команды prename

Синтаксис:
rename [ -v ] [ -n ] [ -f ] perlexpr [ files ]

-v, --verbose
Verbose: print names of files successfully renamed.
-n, --no-act
No Action: show what files would have been renamed.
-f, --force
Force: overwrite existing files.

For example, to rename all files matching "*.bak" to strip the extension, you might say
        rename 's/\.bak$//' *.bak
To translate uppercase names to lower, you'd use
        rename 'y/A-Z/a-z/' *
Заменить все пробелы нижним подчёркиванием:
        rename 's/\s/_/g


Для группового переименования файлов (напр. *.jpg)
perl-rename '$N=sprintf("%04d",++$N); s/.*/$N.jpg/' *.jpg

=========================================================

Регулярные выражения:

\d - соответствует цифре,
\D - соответствует любому символу, кроме цифры,
\s - соответствует любому из "пробельных символов" (пробел, вертикальная , или горизонтальная табуляция, символ новой строки и т. д.),
\S - любой символ, кроме "пробельного",
\w - алфавитно-цифровой символ (любая буква, цифра или символ подчеркивания),
\W - любой символ, кроме букв, цифр и символа подчеркивания,

^ - начало строки текста,
$ - конец строки или позиция перед символом начала новой строки, распо-ложенного в конце,

$' - подстрока, следующая за совпадением.
$& - совпадение с шаблоном поиска
$` - подстрока, расположенная перед совпадением
$^R - результат вычисления утверждения в теле шаблона
$n - n-ный фрагмент совпадения
\n - n-ный фрагмент совпадения вызываемый в самом шаблоне
$+ - фрагмент совпадения
$* - разрешает выполнять поиск в многострочных файлах
@- - спецмассив, который содержит начальную позицию найденного слова
@+ - массив, содержащий позицю последнего найденного слова

* - ноль или несколько совпадений,
+ - одно или несколько совпадений,
? - ноль совпадений или одно совпадение,
{n} - ровно n совпадений,
{n,} - по крайней мере n совпадений,
{n,m} - от n до m совпадений.

/i игнорировать регистр
/x игнорировать пропуски в шаблоне и разрешить комментарии.
/g модификатор разрешающий выполнение поиска/замены везде, где это возможно
/gc не сбрасывается позиция при неудачном поиске.
/s разрешается совпрадение . с \n, игнорируется $*.
/m разрешить совпадение ^ и $ для начала и конца строки во внутренних переводах строк
/o однократная компиляция
/e правая часть s/// представляет собой выполняемый код
/ee правая часть s/// выполняется, после чего возвращаемое значение интерпретируется снова.
=========================================================
